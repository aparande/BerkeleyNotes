\documentclass{article}
\usepackage{amssymb}
\usepackage{amsmath}
\usepackage{mathtools}
\usepackage{cancel}
\usepackage{tikz}
\usepackage{hyperref}
\usepackage{circuitikz}
\usepackage{float}
\usepackage{afterpage}
\usepackage{listings}
\usetikzlibrary{calc}
\newtheorem{theorem}{Theorem}
\newtheorem{definition}{Definition}
\newtheorem{corollary}{Corollary}
\newtheorem{proof}{Proof}
\newtheorem{lemma}{Lemma}

\DeclareMathOperator*{\argmin}{argmin}

\begin{document}
\title{CS70 Course Notes}
\author{Anmol Parande}
\date{Fall 2019 - Professors Alistair Sinclair and Yun Song}
\maketitle
\textbf{Disclaimer: }These notes reflect CS60 when I took the course (Fall 2019). They may not accurately reflect current course content, so use at your own risk.
If you find any typos, errors, etc, please report them on the \href{https://github.com/parandea17/BerkeleyNotes}{GitHub repository}.\\
\tableofcontents
\newpage
\section{Propositional Logic}
\begin{definition}
    A proposition $P$ is a statement that is either true or false
\end{definition}
Propositions can depend on one or more variables. This is denoted by $P(x, y, ...)$
\subsection{Connectives}
\begin{definition}
    A connective is an operator which joins two or more propositions together in some way
\end{definition}
Connectives are fully defined by a \textbf{Truth Table} which enumerates the values of the connective
given all possible combination of inputs.
\begin{definition}
    The base connectives are those which can be combined to create any other connective.
    \begin{itemize}
        \item $\land$: P AND Q
        \item $\lor$: P OR Q
        \item $\lnot$: NOT P
    \end{itemize}
\end{definition}
One important connective is the \textbf{implies} connective.

\begin{center}
    \begin{tabular}{c|c|c} 
     P & Q & $P \implies Q$ \\
     \hline
     T & T & T \\ 
     T & F & F \\
     F & T & T \\
     F & F & T \\ 

    \end{tabular}
\end{center}
Notice that $P \implies Q$ has the same truth table as $\lnot P \lor Q$. This means they are equivalent.
\begin{definition}
    The contrapositive of $P \implies Q$ is $\lnot Q \implies \lnot P$
\end{definition}
\textbf{Notice: }The contrapositive is logically equivalent to the original statement
\begin{definition}
    The converse of $P \implies Q$ is $Q \implies P$
\end{definition}
\textbf{Notice: }This is not always equivalent to the original statement
The \textbf{if and only if} connective $P \iff Q$ is equivalent to $(P \implies Q) \land (Q \implies P)$
\begin{center}
    \begin{tabular}{c|c|c} 
     P & Q & $P \iff Q$ \\
     \hline
     T & T & T \\ 
     T & F & F \\
     F & T & F \\
     F & F & T \\ 
    \end{tabular}
\end{center}
\subsection{Quantifiers}
Quantifiers help introduce variables into our propositions.
\begin{itemize}
    \item $\forall$: For all
    \item $\exists$: There exists
\end{itemize}
\textbf{Important: }The order of quantifiers matters.
\subsection{DeMorgan's Laws}
\begin{itemize}
    \item $\lnot(P \land Q) \equiv \lnot P \lor \lnot Q$
    \item $\lnot(P \lor Q) \equiv \lnot P \land \lnot Q$
    \item $\lnot(\forall x P(x)) \equiv \exists x (\lnot P(x))$
    \item $\lnot(\exists x P(x)) \equiv \forall x (\lnot P(x))$
\end{itemize}
\section{Proofs}
\begin{definition}
    A proof is a sequency of statements, each of which follows from the preceding ones
    by a valid law of reasoning.
\end{definition}
\begin{definition}
    An Axiom is a basic fact which can be assumed without proof
\end{definition}
\subsection{Direct Proof}
\textbf{Goal:} Prove $P \implies Q$\\
\textbf{Approach:}
\begin{itemize}
    \item[1. ] Assume $P$
    \item[2. ] Deduce $Q$ through logical steps
\end{itemize}
\subsection{Proof by Contraposition}
Since the contrapositive of a statement is logically equivalent to the original statement,
we can prove the original statement by proving the contrapositive.\\
\textbf{Goal:} To prove $P \implies Q$\\
\textbf{Approach:}
\begin{itemize}
    \item[1. ] Assume $\lnot Q$
    \item[2. ] Deduce $\lnot P$ through logical steps 
\end{itemize}
\begin{theorem}
    The pigeonhole principle says that if $n$ objects are placed in $k$ boxes and $n > k$, 
    then some box contains $\ge 1$ object.
\end{theorem}
\subsection{Proof by Contradiction}
\textbf{Goal:} Prove $P \implies Q$
\textbf{Approach:}
\begin{itemize}
    \item[1. ]Assume $\lnot P$
    \item[2. ]Deduce $\lnot P \implies (R \and \lnot R)$ 
\end{itemize}
$R$ and $\lnot R$ are two facts which can be deduced from assumign $\lnot P$
\subsection{Proof by Cases}
\textbf{Goal: } Prove $P \implies Q$\\
\textbf{Approach: }
\begin{itemize}
    \item[1. ]Break P into cases $1...n$
    \item[2. ]Prove $P$ holds in all cases 
\end{itemize}
\subsection{Proof by Induction}
\textbf{Goal:} Prove $\forall n, P(n)$
\textbf{Approach: }
\begin{itemize}
    \item[1. ]Prove a based case
    \item[2. ]Assume P(k) (Induction hypothesis)
    \item[3. ]Prove $P(k) \implies P(k+1)$ (Inductive Step)
\end{itemize}
\subsubsection{Strong Induction}
Because induction requires that $P(k)$ be true to prove $P(k+1)$,
it might be easier to just assume $P(0)\land P(1) \land ... \land P(k)$ when proving $P(k+1)$.
\section{Stable Marriage Algorithm}
\subsection{The algorithm}
The stable marriage algorithm uses a list of preferences to make pairings from two disjoint groups of people.
\begin{lstlisting}
    Input: 
        - n men, n women
        - For each man, a ranked list of the women
        - For each woman, a ranked list of the men
    Goal: Pair men and women up in a way such that 
          two people from different pairings would be 
          happier together if they switched partners

    Algorithm:

        Each Day:
            1. Each man proposes to the first woman on 
                his list who has not yet rejected him
            2. Each woman says "maybe" to the man she 
                likes best among her proposals and 
                rejects the others
            3. Each man crosses off his list the woman 
                who just rejected him
        Repeat until there are no rejections
\end{lstlisting}
\subsection{Proving the Algorithm}
There are four things we must prove in order to make sure that the stable marriage algorithm works.
\begin{itemize}
    \item[1. ] SMA terminates
    \item[2. ] SMA must output a pairing
    \item[3. ] The pairing outputted by SMA is stable
\end{itemize}
Beginning with proving the SMA terminates,
\begin{proof}[SMA Terminates]
    On each iteration, when SMA doesn't halt, some man got rejected. If a man gets 
    rejected, he crossed a woman off his list. If every man gets rejected by every woman on his list, then
    there is a maximum of $n^2$ rejections. This will take a maximum of $n^2$ days, therefore the algorithm
    terminates after $n^2$ days.
\end{proof}
Before proving that the SMA must output a pairing, it is first useful to prove something called the improvement lemma
\begin{lemma}[Improvement lemma]
    Suppose $M$ proposes to $W$ on iteration $K$. On every day $J \ge K$,
    $W$ has said "maybe" to a man she likes at least as much as $M$ 
\end{lemma}
\begin{proof}[Improvement Lemma]
    Proceed with induction on the number of days $k$\\\\
    \textbf{Base Case: }$J = K$\\
    $M$ proposes to $W$, so the statement holds because even if $M$ is her worst proposal,
    she will only say "maybe" to a better man.\\\\
    \textbf{Induction Hypothesis: } Assume the lemma is true for day $J$\\
    \textbf{Inductive Step: }\\
    On day $J$, $W$ has said "maybe" to $M'$ she likes at least as much as $M$. $M'$ will propose again on
    day $J+1$, so no matter who else proposes to $W$, she will at least have $M'$ who is better than $M$
\end{proof}
\begin{proof}[SMA outputs a pairing]
    Suppose the algirhtm produces no pairing. Then there exists $M$ who is rejected by all $n$ women
    when the algorithm terminates. By the improvement lemma, all women at the end of the algorithm have a men
    whom they've said maybe to. So $n$ women can only have rejected $n-1$ men which is a contradiction, therefore
    SMA must output a pairing.
\end{proof}
Before proving that the output of SMA is stable, we should define what stability means.
\begin{definition}
    A pairing outputted by SMA is stable if there is not a man and a woman 
    who would rather be with each other than their current partners (a rogue couple).
\end{definition}
\begin{proof}[SMA outputs a stable pairing]
    Suppose the pairing outputted by SMA is $\{...(M, W)...(M', W')\}$ and $M$
    likes $W'$ more than $W$. Since M likes $W'$ more than $W$, M must have proposed
    to $W'$. By the improvement lemma, $M'$ must be better than $M$, so $(M, W')$ is not
    a rogue couple, so there are no rogue couples and the pairing is stable.
\end{proof}
\begin{definition}
    For a given $M$ the optimal $W$ is the highest woman on his list that he is paired with
    in any stable pairing
\end{definition}
\begin{definition}
    The male optimal pairing is the one in which every man is paired with his optimal woman.
\end{definition}
\begin{proof}[SMA is male-optimal]
    Proceed by induction on $k$ (the number of days). $\forall k \ge 0$, on day $k$, no man gets rejected by his optimal woman.\\\\
    \textbf{Base Case: } $k=0$
    \\Nothing to prove, no rejections have happened\\\\
    \textbf{Inductive Step: }\\
    Assume for all $0 \le k \le j$, no man is rejected by his optimal woman. Suppose for contradiction
    that on day $j+1$ M gets rejected by his optimal woman $W^*$ meaning some other man was accepted $M^*$.
    Since $W^*$ is M's optimal woman, there exists a stable pairing $\{...(M, W^*)...(M^*, W')\}$
    since $W^*$ prefers $M^*$ to M because she rejected M. By the inductive hypothesis, $M^*$ has not yet
    been rejected by his optimal woman, so he likes $W^*$ at least as much as $W'$ because there is a stabe
    pairing with $W'$. Hence $(M^*, W^*)$ is rogue because they like each other better than their partners.
\end{proof}
\begin{theorem}
    The male-optimal pairing is the female-pessimal pairing.
\end{theorem}
\end{document}